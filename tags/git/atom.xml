<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en"><generator uri="https://gohugo.io/" version="0.74.3">Hugo</generator><title type="html">git on krei</title><link href="https://krei.projects.metio.wtf/tags/git/" rel="alternate" type="text/html" title="HTML"/><link href="https://krei.projects.metio.wtf/tags/git/index.xml" rel="alternate" type="application/rss+xml" title="RSS"/><link href="https://krei.projects.metio.wtf/tags/git/atom.xml" rel="self" type="application/atom+xml" title="Atom"/><updated>2020-08-16T02:31:00+00:00</updated><id>https://krei.projects.metio.wtf/tags/git/</id><entry><title type="html">Git Mirrors</title><link href="https://krei.projects.metio.wtf/contributors/git-mirrors/?utm_source=atom_feed" rel="alternate" type="text/html"/><id>https://krei.projects.metio.wtf/contributors/git-mirrors/</id><published>2020-04-13T00:00:00+00:00</published><updated>2020-04-13T00:00:00+00:00</updated><content type="html"><![CDATA[<p><code>krei</code> is using <a href="https://github.com/metio/krei">GitHub</a> as its primary source/issue/build environment, however its code is available in other git repositories as well in order to deal with <a href="https://www.githubstatus.com/">GitHub outages</a>.</p>
<h2 id="available-mirrors">Available Mirrors</h2>
<ul>
<li><a href="https://github.com/metio/krei">https://github.com/metio/krei</a></li>
<li><a href="https://repo.or.cz/krei.git">https://repo.or.cz/krei.git</a></li>
<li><a href="https://codeberg.org/metio.wtf/krei">https://codeberg.org/metio.wtf/krei</a></li>
<li><a href="https://gitlab.com/metio.wtf/krei">https://gitlab.com/metio.wtf/krei</a></li>
<li><a href="https://bitbucket.org/metio-wtf/krei">https://bitbucket.org/metio-wtf/krei</a></li>
</ul>
<h2 id="automatic-mirroring">Automatic Mirroring</h2>
<p>The Gitlab repository pulls changes from GitHub and pushes changes into Codeberg and Bitbucket. The repo.or.cz mirror pulls from GitHub as well, therefore all you have to do is, push your changes into GitHub and a few minutes later, all other repositories will get the latest code automatically - including all branches.</p>
<h2 id="manual-mirroring">Manual Mirroring</h2>
<p>In case Gitlab is down or removes the mirroring feature, an update can be performed manually.</p>
<h3 id="ssh-setup-optional">SSH Setup (<strong>Optional</strong>)</h3>
<p>Use the following example config as reference and adapt according to your needs. In case you are using the same SSH key for every remote, adapt the <code>IdentityFile</code> part in the example. In case you only want to mirror to a subset of all mirrors, remove all those that you do not want to support.</p>
<pre><code>Host github
    HostName github.com
    User git
    IdentityFile ~/.ssh/github

Host gitlab
    HostName gitlab.com
    User git
    IdentityFile ~/.ssh/gitlab

Host bitbucket
    HostName bitbucket.org
    User git
    IdentityFile ~/.ssh/bitbucket

Host codeberg
    HostName codeberg.org
    User git
    IdentityFile ~/.ssh/codeberg
</code></pre><h3 id="git-remote-mirrors">Git Remote Mirrors</h3>
<p>Use the following commands to create a new git remote which only allows pushing code. Only specify those mirrors that you want to support.</p>
<div class="highlight"><pre class="chroma"><code class="language-shell" data-lang="shell">$ git remote add mirrors DISABLED
$ git remote set-url --add --push mirrors codeberg:metio.wtf/krei.git
$ git remote set-url --add --push mirrors gitlab:metio.wtf/krei.git
$ git remote set-url --add --push mirrors bitbucket:metio-wtf/krei.git
</code></pre></div><p>In case you have not done the SSH setup above, use this:</p>
<div class="highlight"><pre class="chroma"><code class="language-shell" data-lang="shell">$ git remote add mirrors DISABLED
$ git remote set-url --add --push mirrors git@codeberg.org:metio.wtf/krei.git
$ git remote set-url --add --push mirrors git@gitlab.com:metio.wtf/krei.git
$ git remote set-url --add --push mirrors git@bitbucket.org:metio-wtf/krei.git
</code></pre></div><p>The final configuration should look like this:</p>
<div class="highlight"><pre class="chroma"><code class="language-shell" data-lang="shell">$ git remote -v
mirrors DISABLED <span class="o">(</span>fetch<span class="o">)</span>
mirrors codeberg:metio.wtf/krei.git <span class="o">(</span>push<span class="o">)</span>
mirrors gitlab:metio.wtf/krei.git <span class="o">(</span>push<span class="o">)</span>
mirrors bitbucket:metio-wtf/krei.git <span class="o">(</span>push<span class="o">)</span>
</code></pre></div><p>Finally, push the current branch to all mirrors, e.g. <code>master</code>:</p>
<div class="highlight"><pre class="chroma"><code class="language-shell" data-lang="shell">$ git push mirrors master:master
</code></pre></div>]]></content><category scheme="https://krei.projects.metio.wtf/categories/contributors" term="contributors" label="Contributors"/><category scheme="https://krei.projects.metio.wtf/tags/git" term="git" label="git"/><category scheme="https://krei.projects.metio.wtf/tags/mirror" term="mirror" label="mirror"/></entry></feed>